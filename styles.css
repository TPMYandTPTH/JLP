/* ============================================================================
   TP Candidate Microsite — styles.css
   Global styles shared across pages (index, about, interview, jobs, visa, why)
   Long-form, non-destructive, and aligned to app.js & page templates
   Updated: 2025-08-21 (TP Pink + Purple fallback, secondary icons layout, FAB)
============================================================================ */

/* ---------------------------------------------
   0) Reset / Base
---------------------------------------------- */
*,
*::before,
*::after { box-sizing: border-box; }

:root {
  /* Palette */
  --bg: #ffffff;
  --ink: #0b0b0b;
  --ink-2: #1f2937;
  --muted: #6b6b6b;
  --line: #EEF1F4;

  /* Brand accent (TP Pink primary, Purple fallback where needed) */
  --accent: #ff0082;
  --accent-2: #780096;

  /* Surfaces / shadows / radii */
  --surface: #fbfdff;
  --surface-2: #fff7fb; /* slightly pinkish to make backgrounds more visible */
  --shadow-xl: 0 18px 60px rgba(16, 24, 40, 0.10);
  --shadow-lg: 0 14px 40px rgba(16, 24, 40, 0.08);
  --shadow-md: 0 8px 24px rgba(16, 24, 40, 0.08);
  --shadow-sm: 0 6px 20px rgba(16, 24, 40, 0.06);
  --radius: 14px;
  --radius-lg: 18px;
  --radius-full: 999px;

  /* Layout */
  --maxw: 1200px;
  --pad: 24px;
  --gap: 20px;
  --navH: 64px;

  /* Focus */
  --focus: 0 0 0 3px rgba(255,0,130,0.20);
}

html, body { height: 100%; }
html { scroll-behavior: smooth; }
body {
  margin: 0;
  color: var(--ink);
  background: var(--bg);
  line-height: 1.65;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-family: "Noto Sans JP","Calibri Light","Inter",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol",sans-serif;
}

img, picture, video, canvas, svg { display: block; max-width: 100%; }
input, button, textarea, select { font: inherit; }
a { color: inherit; text-decoration: none; }
a:focus-visible, button:focus-visible { outline: none; box-shadow: var(--focus); border-radius: 8px; }

/* Typography helpers */
.subtle { color: #6b7280; }
.quote  { border-left: 3px solid var(--accent); padding: 10px 12px; background: #FAFAFC; border-radius: 8px; }

/* Layout container */
.container {
  max-width: var(--maxw);
  margin: 0 auto;
  padding: 0 var(--pad);
}

/* Spacing utils */
.u-mt0{ margin-top:0 !important; }
.u-mt4{ margin-top:4px !important; }
.u-mt6{ margin-top:6px !important; }
.u-mt8{ margin-top:8px !important; }
.u-mt10{ margin-top:10px !important; }
.u-mt12{ margin-top:12px !important; }
.u-mt14{ margin-top:14px !important; }
.u-mt16{ margin-top:16px !important; }

/* Visually hidden (skip link) */
.visually-hidden {
  position:absolute!important; width:1px!important; height:1px!important; padding:0!important; margin:-1px!important;
  overflow:hidden!important; clip:rect(0,0,0,0)!important; white-space:nowrap!important; border:0!important;
}

/* ---------------------------------------------
   1) Header / Navigation / Drawer
---------------------------------------------- */
.site-header {
  position: sticky; top: 10px; z-index: 100;
  backdrop-filter: blur(8px);
  background: rgba(255,255,255,0.92);
  border: 1px solid var(--line);
  border-radius: 16px;
  box-shadow: var(--shadow-sm);
  margin: 10px var(--pad);
}
.header-inner {
  height: var(--navH);
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 10px;
}

.brand {
  display: flex; align-items: center; gap: 10px;
}
.brand-logo {
  height: 44px; width: auto; border-radius: 8px;
  border: 1px solid var(--line);
  background: #fff;
}
.brand-text .t { font-weight: 900; letter-spacing: .02em; }
.brand-text .s { font-size: 12px; color: var(--muted); }

.site-nav { display: flex; align-items: center; gap: 12px; justify-content: center; }
.site-nav a {
  padding: 8px 10px; border-radius: 10px;
  color: #263238; font-weight: 700; font-size: 14px;
}
.site-nav a:hover { background: #fff0f7; color: #0a2540; }
.site-nav a[aria-current="page"] { background: #ffe3f1; color: #0a2540; }

.header-actions { display: flex; align-items: center; gap: 10px; }

/* Buttons */
.btn {
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  padding: 10px 14px; border-radius: 12px; border: 1px solid var(--line);
  background: #fff; cursor: pointer; font-weight: 800;
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
  text-decoration: none;
}
.btn:hover { box-shadow: var(--shadow-sm); }
.btn:active { transform: translateY(1px); }
.btn.primary {
  background: var(--accent); border-color: var(--accent); color: #fff;
  box-shadow: 0 8px 24px rgba(255,0,130,0.18);
}
.btn.primary:focus-visible { box-shadow: var(--focus), 0 8px 24px rgba(255,0,130,0.18); }
.btn.ghost { background: #fff; color: #0a2540; }

/* Hamburger */
.hamburger {
  width: 42px; height: 42px; display: inline-flex; align-items: center; justify-content: center;
  border-radius: 12px; border: 1px solid var(--line); background: #fff; padding: 0;
}
.hamburger span {
  display: block; width: 18px; height: 2px; background: #0a2540; margin: 2px 0;
}

/* Drawer */
.scrim {
  position: fixed; inset: 0; background: rgba(0,0,0,0.35);
  opacity: 0; visibility: hidden; transition: opacity .18s ease;
}
.scrim.show { opacity: 1; visibility: visible; }

.drawer {
  position: fixed; top: 0; right: 0; bottom: 0; width: 84vw; max-width: 420px;
  background: #fff; border-left: 1px solid var(--line); box-shadow: var(--shadow-lg);
  transform: translateX(100%); transition: transform .22s ease; z-index: 110;
  display: flex; flex-direction: column;
}
.drawer.open { transform: translateX(0); }
.drawer-head {
  display: flex; align-items: center; justify-content: space-between; gap: 10px;
  padding: 14px; border-bottom: 1px solid var(--line);
}
.drawer-nav { display: grid; gap: 6px; padding: 12px; }
.drawer-nav .d-link {
  display: block; padding: 10px 12px; border-radius: 10px; border: 1px solid var(--line);
  background: #fff;
}
.drawer-nav .d-link[aria-current="page"] { background: #ffe3f1; border-color: #ffd0e8; }
.drawer-foot { padding: 12px; border-top: 1px solid var(--line); }

/* ---------------------------------------------
   2) Hero
---------------------------------------------- */
.hero {
  margin: 18px 0 0;
}
.hero-inner {
  display: grid; grid-template-columns: 1fr 440px; gap: 20px; align-items: center;
  padding: 28px; border: 1px solid var(--line); border-radius: 18px;
  background: linear-gradient(180deg,#fff,var(--surface-2));
  box-shadow: var(--shadow-lg);
}
.eyebrow {
  color: var(--accent); font-size: 12px; letter-spacing: .08em; font-weight: 800; text-transform: uppercase;
}
.hero-title { font-size: 36px; line-height: 1.12; margin: 10px 0; }
.lead { color: #4B5563; max-width: 64ch; }
.hero-ctas { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 14px; }

.stats { display: flex; gap: 14px; margin-top: 14px; padding: 0; list-style: none; }
.stat {
  background: #fff; border: 1px solid var(--line);
  border-radius: 12px; padding: 10px 14px; text-align: center; min-width: 96px;
}
.stat strong { display: block; font-size: 18px; color: var(--ink-2); }
.stat span { font-size: 12px; color: var(--muted); }

.hero-media img {
  width: 440px; height: 320px; object-fit: cover;
  border-radius: 14px; border: 1px solid var(--line); box-shadow: var(--shadow-sm);
}

/* ---------------------------------------------
   3) Sections / Cards / Grids
---------------------------------------------- */
section { margin-top: 28px; }

.section-head {
  display: flex; align-items: end; justify-content: space-between; gap: 12px; margin-bottom: 14px;
}
.h2 { font-size: 24px; margin: 0 0 4px; font-weight: 900; }
.h2-sub { font-size: 13px; color: var(--muted); }

.card {
  background: #fff; border: 1px solid var(--line);
  border-radius: 14px; box-shadow: var(--shadow-sm); padding: 18px;
}

.grid { display: grid; gap: var(--gap); }
.cols-2 { grid-template-columns: 1fr 1fr; }
.cols-3 { grid-template-columns: repeat(3, 1fr); }
.cols-4 { grid-template-columns: repeat(4, 1fr); }

/* Responsive grid helpers used widely across pages */
@media (max-width: 1024px) {
  .hero-inner { grid-template-columns: 1fr; }
  .hero-media img { width: 100%; height: 220px; }
  .cols-3 { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 768px) {
  .cols-2, .cols-3, .cols-4 { grid-template-columns: 1fr; }
  .section-head { flex-direction: column; align-items: flex-start; }
}
@media (max-width: 480px) {
  .stats { flex-wrap: wrap; }
  .stat { min-width: 88px; }
}

/* ---------------------------------------------
   4) Reveal on scroll
---------------------------------------------- */
.reveal { opacity: 0; transform: translateY(16px); transition: all 0.6s cubic-bezier(0.2, 0.9, 0.3, 1); }
.reveal.in { opacity: 1; transform: none; }

/* ---------------------------------------------
   5) Cities / Image cards / Members
---------------------------------------------- */
.city {
  position: relative; min-height: 220px; border-radius: 14px; overflow: hidden;
  border: 1px solid var(--line); box-shadow: var(--shadow-sm); transform: translateZ(0);
}
.city img { width: 100%; height: 100%; object-fit: cover; }
.city .overlay {
  position: absolute; left: 12px; bottom: 12px;
  background: linear-gradient(90deg,rgba(0,0,0,0.62),rgba(0,0,0,0.28));
  padding: 10px 12px; border-radius: 10px; color: #fff; max-width: 80%;
}
.city:hover { transform: translateY(-2px); transition: transform .18s ease; }

.member {
  background:#fff; border:1px solid var(--line); border-radius:14px; padding:14px; text-align:center;
  box-shadow: var(--shadow-sm);
}
.member img {
  width: 96px; height: 96px; object-fit: cover; border-radius: 50%;
  margin: 0 auto 8px; border: 2px solid var(--accent);
}

/* ---------------------------------------------
   6) Tables / Badges / Pills
---------------------------------------------- */
table { width: 100%; border-collapse: separate; border-spacing: 0; margin: 6px 0 0; }
th, td { padding: 10px 12px; border-bottom: 1px solid var(--line); }
th { background: #F7FAFF; text-align: left; font-weight: 800; }
tbody tr:hover { background: #fafcff; }

.badge {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 6px 10px; border-radius: var(--radius-full);
  background: #F2F6FF; color: #0a2540; font-weight: 800;
  border: 1px solid var(--line); font-size: 12px;
}
.badge.note { background:#fff0f7; }

/* ---------------------------------------------
   7) Timeline / FAQ toggle
---------------------------------------------- */
.timeline {
  list-style: none; padding: 0; margin: 0;
  counter-reset: step;
}
.timeline li {
  position: relative; padding-left: 28px; margin: 10px 0;
}
.timeline li::before {
  counter-increment: step; content: counter(step);
  position: absolute; left: 0; top: 0.15em;
  width: 20px; height: 20px; border-radius: 50%;
  background: var(--accent); color: #fff; font-size: 12px; font-weight: 900;
  display: inline-flex; align-items: center; justify-content: center;
}

.faq .q {
  display:block; width:100%; text-align:left; padding:10px 12px; border:1px solid var(--line);
  background:#fff; border-radius:10px; font-weight:800;
}
.faq .q + .a {
  margin-top:8px; border:1px solid var(--line); border-radius:10px; padding:10px 12px; background:#fff;
}

/* ---------------------------------------------
   8) Icon Grids (Priority / Secondary)
---------------------------------------------- */
section.icon-grid { position: relative; }
.bg-connectors { position:absolute; inset:auto 0 0 0; height:320px; overflow:hidden; pointer-events:none; opacity:0.9; }

.icon-row { display:grid; gap: var(--gap); }

.icon-card {
  position: relative;
  display: grid;
  grid-template-rows: auto auto;
  gap: 8px;
  padding: 12px;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: #fff;
  box-shadow: var(--shadow-sm);
  overflow: hidden;
}
.icon-card .icon {
  display:flex; align-items:center; justify-content:center;
}
.icon-card .icon svg,
.icon-card .icon img { width: 48px; height: 48px; }
.icon-card .meta .title { font-weight: 900; }
.icon-card .meta .desc { color: #6b7280; font-size: 13px; }

/* Photo tile enhancement injected by app.js (decorateIconCard) */
.icon-card.is-photo-card {
  grid-template-rows: auto 1fr;
  padding: 0;
}
.icon-card .photo { position: relative; height: 140px; overflow: hidden; }
.icon-card .photo .photo-img {
  width: 100%; height: 100%; object-fit: cover;
}
.icon-card.is-photo-card .meta { padding: 12px; }

/* Priority: enforce 3×3 gallery */
section.icon-grid.priority.priority-3x3 .icon-row,
section.icon-grid.priority.priority-3x3 {
  display: grid; gap: var(--gap);
  grid-template-columns: repeat(3, 1fr);
}

/* Secondary: full-width band, 4 per row desktop, 3 per row on phones */
section.icon-grid.secondary {
  padding: 10px 0 16px;
  background: linear-gradient(180deg, #fff, var(--surface-2));
  border-top: 1px solid var(--line);
  border-bottom: 1px solid var(--line);
}
section.icon-grid.secondary .icon-row,
section.icon-grid.secondary.secondary-grid {
  display: grid; gap: var(--gap);
  grid-template-columns: repeat(4, 1fr);
}
@media (max-width: 768px) {
  section.icon-grid.priority.priority-3x3 { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 600px) {
  /* Show 3 across even on small phones as requested */
  section.icon-grid.secondary.secondary-grid { grid-template-columns: repeat(3, 1fr); }
}
@media (max-width: 480px) {
  /* Priority collapses to single to keep readability */
  section.icon-grid.priority.priority-3x3 { grid-template-columns: 1fr; }
}

/* ---------------------------------------------
   9) Carousels (Benefits, etc.)
---------------------------------------------- */
.carousel {
  position: relative; overflow: hidden;
}
.slides {
  display: flex; gap: 12px; transition: transform .3s ease; will-change: transform;
}
.slide {
  min-width: 280px; max-width: 360px; flex: 0 0 auto;
  background: #fff; border: 1px solid var(--line); border-radius: 12px; padding: 14px;
  box-shadow: var(--shadow-sm);
}
.carousel .nav {
  display:flex; gap: 8px; align-items:center;
}
.carousel .nav .btn { padding: 8px 10px; }

/* ---------------------------------------------
   10) Culture strip (parallax motifs)
---------------------------------------------- */
.culture-strip {
  position: relative; overflow: hidden; border-radius: 16px; border: 1px solid var(--line);
  background: linear-gradient(90deg, #fff, var(--surface-2));
  padding: 18px;
}
.culture-strip .motif {
  position: absolute; top: 0; will-change: transform; opacity: .25;
}

/* ---------------------------------------------
   11) Apply bar (mobile) & Back-to-top & Apply FAB
---------------------------------------------- */
.apply-bar {
  position: fixed; left: 0; right: 0; bottom: 0; z-index: 90;
  display: flex; gap: 10px; justify-content: center; align-items: center; padding: 10px;
  background: rgba(255,255,255,0.96);
  border-top: 1px solid var(--line);
  box-shadow: 0 -8px 20px rgba(16,24,40,0.06);
  transform: translateY(100%); transition: transform .2s ease;
}
.apply-bar .btn { min-width: 120px; }

.to-top {
  position: fixed; right: 18px; bottom: 18px; z-index: 120;
  transform: translateY(140%); opacity: 0; transition: transform .18s ease, opacity .18s ease;
}
.to-top.show { transform: translateY(0); opacity: 1; }

/* Apply Now button next to arrow */
.apply-fab {
  position: fixed; right: 72px; bottom: 18px; z-index: 120;
  display: inline-flex; align-items: center; gap: 8px; padding: 10px 14px;
  border-radius: 999px; border: 1px solid var(--line); text-decoration: none; font-weight: 800;
  background: var(--accent); color: #fff; box-shadow: var(--shadow-sm);
}
@media (max-width: 580px) {
  .apply-fab { right: 64px; bottom: 14px; padding: 8px 12px; }
}

/* ---------------------------------------------
   12) CTA band / Footer
---------------------------------------------- */
.cta-band { margin: 28px 0; }
.site-footer {
  margin-top: 40px; border-top: 1px solid var(--line);
  padding: 20px 0; color: #6b7280; font-size: 14px;
}
.footer-inner {
  display: flex; align-items: center; justify-content: space-between; gap: 12px;
}
.footer-links { display: flex; gap: 12px; list-style: none; padding: 0; margin: 0; }
.footer-links a { color: #0a2540; }
.copy { margin: 0; }

/* ---------------------------------------------
   13) Page-specific helpers (kept generic)
---------------------------------------------- */
.highlight-box {
  background: linear-gradient(120deg, rgba(255,0,130,0.08), rgba(120,0,150,0.06));
  border-left: 4px solid var(--accent);
  padding: 16px; border-radius: 0 12px 12px 0; margin: 16px 0;
}

.comparison-chart { display: flex; gap: 20px; margin-top: 20px; }
.chart-item {
  flex: 1; text-align: center; padding: 16px; border-radius: 12px;
  background: var(--surface); border: 1px solid var(--line);
}
.chart-bar {
  height: 200px; width: 40px; margin: 0 auto; background: #e0e7ff; border-radius: 8px; position: relative; overflow: hidden;
}
.chart-fill {
  position: absolute; bottom: 0; left: 0; right: 0;
  background: var(--accent); border-radius: 8px 8px 0 0; transition: height 1s ease;
}
.chart-label { margin-top: 10px; font-weight: 700; }

.city-comparison { display: flex; gap: 20px; margin-top: 20px; }
.city-feature {
  flex: 1; padding: 16px; border-radius: 12px; background: var(--surface); border: 1px solid var(--line);
}

/* Lifestyle icons (used on Why page) */
.lifestyle-icons {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-top: 20px;
}
.lifestyle-icon { text-align: center; padding: 12px; }
.lifestyle-icon img { width: 64px; height: 64px; object-fit: contain; margin-bottom: 10px; }

@media (max-width: 1024px) {
  .lifestyle-icons { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 480px) {
  .lifestyle-icons { grid-template-columns: 1fr; }
}

/* ---------------------------------------------
   14) Noscript
---------------------------------------------- */
.noscript {
  margin: 16px; padding: 12px 14px; border-radius: 12px; border: 1px solid var(--line);
  background: #fff7f0;
}

/* ---------------------------------------------
   15) Helpers for backgrounds (more visible)
---------------------------------------------- */
.bg-soft {
  background: linear-gradient(180deg, #fff, var(--surface-2));
  border: 1px solid var(--line);
  border-radius: 14px;
  padding: 18px;
}

/* Ensure connectors are a bit more visible on light backgrounds */
.bg-connectors svg line,
.bg-connectors svg circle { opacity: 0.7; }

/* ---------------------------------------------
   16) Language chips etc. (future-proof)
---------------------------------------------- */
.lang-chip {
  display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px;
  border:1px solid var(--line); background:#fff; font-weight:800; font-size:12px;
}

/* ---------------------------------------------
   17) Misc utilities used by app.js injections
---------------------------------------------- */
.photo-shadow { box-shadow: var(--shadow-sm); border: 1px solid var(--line); border-radius: 12px; }
.maxw-64ch { max-width: 64ch; }
